{{- if .Values.config.secret.create }}
apiVersion: v1
kind: Secret
metadata:
  name: argocd-secret
type: Opaque
data:
#   # TLS certificate and private key for API server.
#   # Autogenerated with a self-signed ceritificate if keys are missing.
#   tls.crt:
#   tls.key:
#
#   # bcrypt hash of the admin password and it's last modified time. Autogenerated on initial
#   # startup. To reset a forgotten password, delete both keys and restart argocd-server.
  {{- if .Values.config.secret.admin.password }}
  admin.password: {{ .Values.config.secret.admin.password | b64enc }}
  {{- end }}
  {{- if .Values.config.secret.admin.passwordMtime }}
  admin.passwordMtime: {{ .Values.config.secret.admin.passwordMtime | b64enc }}
  {{- end }}
#
#   # random server signature key for session validation. Autogenerated on initial startup
#   server.secretkey:
#
#   # The following keys hold the shared secret for authenticating GitHub/GitLab/BitBucket webhook
#   # events. To enable webhooks, configure one or more of the following keys with the shared git
#   # provider webhook secret. The payload URL configured in the git provider should use the
#   # /api/webhook endpoint of your Argo CD instance (e.g. https://argocd.example.com/api/webhook)
#   github.webhook.secret:
#   gitlab.webhook.secret:
#   bitbucket.webhook.uuid:
{{- end }}